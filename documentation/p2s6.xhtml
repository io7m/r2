<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>com.io7m.r2 0.3.0-SNAPSHOT Documentation: 2.6. Instances</title><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8"/><link rel="stylesheet" type="text/css" href="kstructural-layout.css"/><link rel="stylesheet" type="text/css" href="kstructural-colour.css"/><link rel="stylesheet" type="text/css" href="documentation.css"/></head><body><div class="st300_body"><div class="st300_navbar st300_navbar_top"><table class="st300_navbar_table" summary="st300_Navigation bar"><tr><td class="st300_navbar_prev_title_cell">2.5. Transforms</td><td class="st300_navbar_up_title_cell">2. Design And Implementation</td><td class="st300_navbar_next_title_cell">2.7. Render Targets</td></tr><tr><td class="st300_navbar_prev_file_cell"><a rel="previous" href="p2s5.xhtml#st300_p2s5" title="Go to previous page">Previous</a></td><td class="st300_navbar_up_file_cell"><a rel="up" href="p2.xhtml#st300_p2" title="Go to parent page">Up</a></td><td class="st300_navbar_next_file_cell"><a rel="next" href="p2s7.xhtml#st300_p2s7" title="Go to next page">Next</a></td></tr></table><hr class="st300_hr"/></div><div class="st300_section_container"><a id="di.instances"/><div class="st300_section_title_number"><a id="st300_p2s6" href="#st300_p2s6" title="Section 2.6: Instances">2.6</a></div><div class="st300_section_title">Instances</div><ul class="st300_contents st300_section_contents_outer st300_section_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s6.xhtml#st300_p2s6ss1" title="Link to subsection 2.6.1: Overview">2.6.1. Overview</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s6.xhtml#st300_p2s6ss2" title="Link to subsection 2.6.2: Single">2.6.2. Single</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s6.xhtml#st300_p2s6ss3" title="Link to subsection 2.6.3: Batched">2.6.3. Batched</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s6.xhtml#st300_p2s6ss4" title="Link to subsection 2.6.4: Billboarded">2.6.4. Billboarded</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s6.xhtml#st300_p2s6ss5" title="Link to subsection 2.6.5: Types">2.6.5. Types</a></li></ul><div class="st300_subsection_container"><a id="di.instances.overview"/><div class="st300_subsection_title_number"><a id="st300_p2s6ss1" href="#st300_p2s6ss1" title="Subsection 2.6.1: Overview">2.6.1</a></div><div class="st300_subsection_title">Overview</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s6ss1c1" href="#st300_p2s6ss1c1" title="Paragraph 2.6.1.1">1</a></div><div class="st300_paragraph">An <span class="st300_term term">instance</span> is a renderable object. There are several types of instances available in the <span class="st300_term package">r2</span> package: <a class="st300_link" href="p2s6.xhtml#di.instances.single">single</a>, <a class="st300_link" href="p2s6.xhtml#di.instances.batched">batched</a>, and <a class="st300_link" href="p2s6.xhtml#di.instances.billboarded">billboarded</a>.</div></div></div><div class="st300_subsection_container"><a id="di.instances.single"/><div class="st300_subsection_title_number"><a id="st300_p2s6ss2" href="#st300_p2s6ss2" title="Subsection 2.6.2: Single">2.6.2</a></div><div class="st300_subsection_title">Single</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s6ss2c1" href="#st300_p2s6ss2c1" title="Paragraph 2.6.2.1">1</a></div><div class="st300_paragraph">A <span class="st300_term term">single</span> instance is the simplest type of instance available in the <span class="st300_term package">r2</span> package. A <span class="st300_term term">single</span> instance is simply a pair <span class="st300_term expression">(m, t)</span>, where <span class="st300_term expression">m</span> is a <a class="st300_link" href="p2s4.xhtml#di.meshes">mesh</a>, and <span class="st300_term expression">t</span> is a <a class="st300_link" href="p2s5.xhtml#di.transforms">transform</a> capable of transforming the <a class="st300_link" href="p2s3.xhtml#di.coords.object">object space</a> coordinates of the vertices contained within <span class="st300_term expression">m</span> to <a class="st300_link" href="p2s3.xhtml#di.coords.world">world space</a>.</div></div></div><div class="st300_subsection_container"><a id="di.instances.batched"/><div class="st300_subsection_title_number"><a id="st300_p2s6ss3" href="#st300_p2s6ss3" title="Subsection 2.6.3: Batched">2.6.3</a></div><div class="st300_subsection_title">Batched</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s6ss3c1" href="#st300_p2s6ss3c1" title="Paragraph 2.6.3.1">1</a></div><div class="st300_paragraph">A <span class="st300_term term">batched</span> instance represents a group of (identical) renderable objects. The reason for the existence of <span class="st300_term term">batched</span> instances is simple efficiency: On modern rendering hardware, rendering <span class="st300_term expression">n</span> <span class="st300_term term">single</span> instances means submitting <span class="st300_term expression">n</span> <span class="st300_term term">draw calls</span> to the GPU. As <span class="st300_term expression">n</span> becomes increasingly large, the overhead of the large number of draw calls becomes a bottleneck for rendering performance. A <span class="st300_term term">batched</span> instance of size <span class="st300_term expression">m</span> allows for rendering a given mesh <span class="st300_term expression">m</span> times in a single draw call.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s6ss3c2" href="#st300_p2s6ss3c2" title="Paragraph 2.6.3.2">2</a></div><div class="st300_paragraph">A <span class="st300_term term">batched</span> instance of size <span class="st300_term expression">n</span> is a 3-tuple <span class="st300_term expression">(m, b, t)</span>, where <span class="st300_term expression">m</span> is a <a class="st300_link" href="p2s4.xhtml#di.meshes">mesh</a>, <span class="st300_term expression">b</span> is a buffer of <span class="st300_term expression">n</span> <a class="st300_link" href="p2s4.xhtml#di.meshes.attributes.batched">4x4 matrices</a> allocated on the GPU, and <span class="st300_term expression">t</span> is an array of <span class="st300_term expression">n</span> <a class="st300_link" href="p2s5.xhtml#di.transforms">transforms</a> allocated on the CPU. For each <span class="st300_term expression">i</span> where <span class="st300_term expression">0 &lt;= i &lt; n</span>, <span class="st300_term expression">b[i]</span> is the 4x4 model matrix produced from <span class="st300_term expression">t[i]</span>. The contents of <span class="st300_term expression">b</span> are typically recalculated and uploaded to the GPU once per rendering frame.</div></div></div><div class="st300_subsection_container"><a id="di.instances.billboarded"/><div class="st300_subsection_title_number"><a id="st300_p2s6ss4" href="#st300_p2s6ss4" title="Subsection 2.6.4: Billboarded">2.6.4</a></div><div class="st300_subsection_title">Billboarded</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s6ss4c1" href="#st300_p2s6ss4c1" title="Paragraph 2.6.4.1">1</a></div><div class="st300_paragraph">A <span class="st300_term term">billboarded</span> instance is a further specialization of <span class="st300_term term">batched</span> instances. <span class="st300_term term">Billboarding</span> is the name given to a rendering technique where instead of rendering full 3D objects, simple 2D images of those objects are rendered instead using flat rectangles that are arranged such that they are always facing directly towards the observer.</div></div><div class="st300_formal_item"><div class="st300_formal_item_title"><a id="st300_p2s6ss4c2" href="#st300_p2s6ss4c2" title="Formal item 2.6.4.2: Billboarded Render">2.6.4.2 Billboarded Render</a></div><div class="st300_formal_item_content"><img class="st300_image" alt="Billboarding" src="images/billboard_render.png"/></div></div><div class="st300_formal_item"><div class="st300_formal_item_title"><a id="st300_p2s6ss4c3" href="#st300_p2s6ss4c3" title="Formal item 2.6.4.3: Billboarded Wireframe">2.6.4.3 Billboarded Wireframe</a></div><div class="st300_formal_item_content"><img class="st300_image" alt="Billboarding in wireframe view" src="images/billboard_wire.png"/></div></div><div class="st300_formal_item"><div class="st300_formal_item_title"><a id="st300_p2s6ss4c4" href="#st300_p2s6ss4c4" title="Formal item 2.6.4.4: Billboarded Wireframe (Side)">2.6.4.4 Billboarded Wireframe (Side)</a></div><div class="st300_formal_item_content"><img class="st300_image" alt="Billboarding in wireframe side view" src="images/billboard_wire_side.png"/></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s6ss4c5" href="#st300_p2s6ss4c5" title="Paragraph 2.6.4.5">5</a></div><div class="st300_paragraph">A <span class="st300_term term">billboarded</span> instance of size <span class="st300_term expression">n</span> is a pair <span class="st300_term expression">(m, p)</span>, where <span class="st300_term expression">m</span> is a <a class="st300_link" href="p2s4.xhtml#di.meshes">mesh</a> <span class="st300_footnote_reference">[<a href="p2s6.xhtml#st300_f_6193_0" id="st300_fr_6170" title="Jump to footnote di.instances.unit_quad (reference 0)">13</a>]</span>, and <span class="st300_term expression">p</span> is a buffer of <span class="st300_term expression">n</span> <a class="st300_link" href="p2s3.xhtml#di.coords.world">world space</a> positions allocated on the GPU.</div></div></div><div class="st300_subsection_container"><a id="di.instances.types"/><div class="st300_subsection_title_number"><a id="st300_p2s6ss5" href="#st300_p2s6ss5" title="Subsection 2.6.5: Types">2.6.5</a></div><div class="st300_subsection_title">Types</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s6ss5c1" href="#st300_p2s6ss5c1" title="Paragraph 2.6.5.1">1</a></div><div class="st300_paragraph">In the <span class="st300_term package">r2</span> package, instances are instances of <a class="st300_link_external" href="apidocs/com/io7m/r2/core/R2InstanceType.html">R2InstanceType</a>.</div></div></div><div class="st300_footnotes"><hr/><div class="st300_footnote_container"><div class="st300_footnote_id">[<a id="st300_f_6193_0" href="p2s6.xhtml#st300_fr_6170" title="Jump back to reference 0 of footnote di.instances.unit_quad">13</a>]</div><div class="st300_footnote_body">Typically a simple two-polygon <span class="st300_term term">unit quad</span>.</div></div></div></div><div class="st300_navbar st300_navbar_bottom"><hr class="st300_hr"/><table class="st300_navbar_table" summary="st300_Navigation bar"><tr><td class="st300_navbar_prev_file_cell"><a rel="previous" href="p2s5.xhtml#st300_p2s5" title="Go to previous page">Previous</a></td><td class="st300_navbar_up_file_cell"><a rel="up" href="p2.xhtml#st300_p2" title="Go to parent page">Up</a></td><td class="st300_navbar_next_file_cell"><a rel="next" href="p2s7.xhtml#st300_p2s7" title="Go to next page">Next</a></td></tr><tr><td class="st300_navbar_prev_title_cell">2.5. Transforms</td><td class="st300_navbar_up_title_cell">2. Design And Implementation</td><td class="st300_navbar_next_title_cell">2.7. Render Targets</td></tr></table></div></div></body></html>
