<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>io7m-r2 0.2.1 Documentation: 2.9. Shaders: Instance</title><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8"/><link rel="stylesheet" type="text/css" href="kstructural-layout.css"/><link rel="stylesheet" type="text/css" href="kstructural-colour.css"/><link rel="stylesheet" type="text/css" href="documentation.css"/></head><body><div class="st300_body"><div class="st300_navbar st300_navbar_top"><table class="st300_navbar_table" summary="st300_Navigation bar"><tr><td class="st300_navbar_prev_title_cell">2.8. Shaders</td><td class="st300_navbar_up_title_cell">2. Design And Implementation</td><td class="st300_navbar_next_title_cell">2.10. Shaders: Light</td></tr><tr><td class="st300_navbar_prev_file_cell"><a rel="previous" href="p2s8.xhtml#st300_p2s8" title="Go to previous page">Previous</a></td><td class="st300_navbar_up_file_cell"><a rel="up" href="p2.xhtml#st300_p2" title="Go to parent page">Up</a></td><td class="st300_navbar_next_file_cell"><a rel="next" href="p2s10.xhtml#st300_p2s10" title="Go to next page">Next</a></td></tr></table><hr class="st300_hr"/></div><div class="st300_section_container"><a id="di.shaders.instance"/><div class="st300_section_title_number"><a id="st300_p2s9" href="#st300_p2s9" title="Section 2.9: Shaders: Instance">2.9</a></div><div class="st300_section_title">Shaders: Instance</div><ul class="st300_contents st300_section_contents_outer st300_section_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s9.xhtml#st300_p2s9ss1" title="Link to subsection 2.9.1: Overview">2.9.1. Overview</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s9.xhtml#st300_p2s9ss2" title="Link to subsection 2.9.2: Materials">2.9.2. Materials</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s9.xhtml#st300_p2s9ss3" title="Link to subsection 2.9.3: Provided Shaders">2.9.3. Provided Shaders</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s9.xhtml#st300_p2s9ss4" title="Link to subsection 2.9.4: Types">2.9.4. Types</a></li></ul><div class="st300_subsection_container"><a id="di.shaders.instance.overview"/><div class="st300_subsection_title_number"><a id="st300_p2s9ss1" href="#st300_p2s9ss1" title="Subsection 2.9.1: Overview">2.9.1</a></div><div class="st300_subsection_title">Overview</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s9ss1c1" href="#st300_p2s9ss1c1" title="Paragraph 2.9.1.1">1</a></div><div class="st300_paragraph">An <span class="st300_term term">instance shader</span> is a shader used to render the surfaces of <a class="st300_link" href="p2s6.xhtml#di.instances">instances</a>. Depending on the context, this may mean rendering the surface attributes of the instances into a <a class="st300_link" href="p2s19.xhtml#di.deferred.geom.gbuffer">geometry buffer</a>, <span class="st300_term term">forward rendering</span> the instance directly to the screen (or
other image) , rendering only the <a class="st300_link" href="p2s17.xhtml#di.shadows.variance">depth</a> of the surface, or perhaps not producing any output at all as shaders used simply for <a class="st300_link" href="p2s11.xhtml#di.stencil">stencilling</a> are permitted to do. Instance shaders are most often exposed to the programmer via <a class="st300_link" href="p2s9.xhtml#di.shaders.instance.material">materials</a>.</div></div></div><div class="st300_subsection_container"><a id="di.shaders.instance.material"/><div class="st300_subsection_title_number"><a id="st300_p2s9ss2" href="#st300_p2s9ss2" title="Subsection 2.9.2: Materials">2.9.2</a></div><div class="st300_subsection_title">Materials</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s9ss2c1" href="#st300_p2s9ss2c1" title="Paragraph 2.9.2.1">1</a></div><div class="st300_paragraph">A <span class="st300_term term">material</span> is a pair <span class="st300_term expression">(s, i, p)</span> where <span class="st300_term expression">p</span> is a value of type <span class="st300_term expression">m</span> that represents a set of shader parameters, <span class="st300_term expression">s</span> is a shader that takes parameters of type <span class="st300_term expression">m</span>, and <span class="st300_term expression">i</span> is a unique identifier for the material. Materials primarily exist to facilitate <a class="st300_link" href="p2s19.xhtml#di.deferred.geom.ordering">batching</a>: By assigning each material a unique identifier, the system can assume that two materials are the same if they have the same identifier, without needing to perform a relatively expensive structural equality comparison between the shaders and shader parameters.</div></div></div><div class="st300_subsection_container"><a id="di.shaders.instance.provided"/><div class="st300_subsection_title_number"><a id="st300_p2s9ss3" href="#st300_p2s9ss3" title="Subsection 2.9.3: Provided Shaders">2.9.3</a></div><div class="st300_subsection_title">Provided Shaders</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s9ss3c1" href="#st300_p2s9ss3c1" title="Paragraph 2.9.3.1">1</a></div><div class="st300_paragraph">Writing shaders is difficult. The programmer must be aware of an endless series of pitfalls inherent in the OpenGL API and the shading language. While the <span class="st300_term package">r2</span> package does allow users to write their own shaders, the intention has always been to provide a small set of general purpose shaders that cover the majority of the use cases in modern games and simulations. The instance shaders provided by default are:</div></div><div class="st300_formal_item"><div class="st300_formal_item_title"><a id="st300_p2s9ss3c2" href="#st300_p2s9ss3c2" title="Formal item 2.9.3.2: Provided instance shaders">2.9.3.2 Provided instance shaders</a></div><div class="st300_formal_item_content"><table class="st300_table shaders" summary="Provided instance shaders"><thead class="st300_table_head"><tr><th class="st300_table_column_name">Shader</th><th class="st300_table_column_name">Description</th></tr></thead><tbody class="st300_table_body"><tr><td class="st300_table_cell"><a class="st300_link_external" href="apidocs/com/io7m/r2/core/shaders/provided/R2SurfaceShaderBasicSingle.html">R2SurfaceShaderBasicSingle</a></td><td class="st300_table_cell">Basic textured surface with normal mapping, specular mapping, emission mapping, and conditional discarding based on alpha.</td></tr><tr><td class="st300_table_cell"><a class="st300_link_external" href="apidocs/com/io7m/r2/core/shaders/provided/R2SurfaceShaderBasicReflectiveSingle.html">R2SurfaceShaderBasicReflectiveSingle</a></td><td class="st300_table_cell">Basic textured surface with pseudo reflections from a cube map, normal mapping, specular mapping, emission mapping, and conditional discarding based on alpha.</td></tr></tbody></table></div></div></div><div class="st300_subsection_container"><a id="di.shaders.instance.types"/><div class="st300_subsection_title_number"><a id="st300_p2s9ss4" href="#st300_p2s9ss4" title="Subsection 2.9.4: Types">2.9.4</a></div><div class="st300_subsection_title">Types</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s9ss4c1" href="#st300_p2s9ss4c1" title="Paragraph 2.9.4.1">1</a></div><div class="st300_paragraph">In the <span class="st300_term package">r2</span> package, materials are instances of <a class="st300_link_external" href="apidocs/com/io7m/r2/core/R2MaterialType.html">R2MaterialType</a>. Geometry renderers primarily consume instances that are associated with values of the <a class="st300_link_external" href="apidocs/com/io7m/r2/core/R2MaterialOpaqueSingleType.html">R2MaterialOpaqueSingleType</a> and <a class="st300_link_external" href="apidocs/com/io7m/r2/core/R2MaterialOpaqueBatchedType.html">R2MaterialOpaqueBatchedType</a> types. Instance shaders are instances of the <a class="st300_link_external" href="apidocs/com/io7m/r2/core/shaders/types/R2ShaderInstanceSingle.html">R2ShaderInstanceSingleType</a> and <a class="st300_link_external" href="apidocs/com/io7m/r2/core/shaders/types/R2ShaderInstanceBatched.html">R2ShaderInstanceBatchedType</a> types.</div></div></div></div><div class="st300_navbar st300_navbar_bottom"><hr class="st300_hr"/><table class="st300_navbar_table" summary="st300_Navigation bar"><tr><td class="st300_navbar_prev_file_cell"><a rel="previous" href="p2s8.xhtml#st300_p2s8" title="Go to previous page">Previous</a></td><td class="st300_navbar_up_file_cell"><a rel="up" href="p2.xhtml#st300_p2" title="Go to parent page">Up</a></td><td class="st300_navbar_next_file_cell"><a rel="next" href="p2s10.xhtml#st300_p2s10" title="Go to next page">Next</a></td></tr><tr><td class="st300_navbar_prev_title_cell">2.8. Shaders</td><td class="st300_navbar_up_title_cell">2. Design And Implementation</td><td class="st300_navbar_next_title_cell">2.10. Shaders: Light</td></tr></table></div></div></body></html>
