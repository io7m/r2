<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>io7m-r2 0.2.0 Documentation: 2.22. Forward rendering (Translucency)</title><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8"/><link rel="stylesheet" type="text/css" href="kstructural-layout.css"/><link rel="stylesheet" type="text/css" href="kstructural-colour.css"/><link rel="stylesheet" type="text/css" href="documentation.css"/></head><body><div class="st300_body"><div class="st300_navbar st300_navbar_top"><table class="st300_navbar_table" summary="st300_Navigation bar"><tr><td class="st300_navbar_prev_title_cell">2.21. Deferred Rendering: Position Reconstruction</td><td class="st300_navbar_up_title_cell">2. Design And Implementation</td><td class="st300_navbar_next_title_cell">2.23. Normal Mapping</td></tr><tr><td class="st300_navbar_prev_file_cell"><a rel="previous" href="p2s21.xhtml#st300_p2s21" title="Go to previous page">Previous</a></td><td class="st300_navbar_up_file_cell"><a rel="up" href="p2.xhtml#st300_p2" title="Go to parent page">Up</a></td><td class="st300_navbar_next_file_cell"><a rel="next" href="p2s23.xhtml#st300_p2s23" title="Go to next page">Next</a></td></tr></table><hr class="st300_hr"/></div><div class="st300_section_container"><a id="di.forward"/><div class="st300_section_title_number"><a id="st300_p2s22" href="#st300_p2s22" title="Section 2.22: Forward rendering (Translucency)">2.22</a></div><div class="st300_section_title">Forward rendering (Translucency)</div><ul class="st300_contents st300_section_contents_outer st300_section_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s22.xhtml#st300_p2s22ss1" title="Link to subsection 2.22.1: Overview">2.22.1. Overview</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s22.xhtml#st300_p2s22ss2" title="Link to subsection 2.22.2: Instances">2.22.2. Instances</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s22.xhtml#st300_p2s22ss3" title="Link to subsection 2.22.3: Blending">2.22.3. Blending</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s22.xhtml#st300_p2s22ss4" title="Link to subsection 2.22.4: Culling">2.22.4. Culling</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s22.xhtml#st300_p2s22ss5" title="Link to subsection 2.22.5: Ordering">2.22.5. Ordering</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s22.xhtml#st300_p2s22ss6" title="Link to subsection 2.22.6: Types">2.22.6. Types</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s22.xhtml#st300_p2s22ss7" title="Link to subsection 2.22.7: Provided Shaders">2.22.7. Provided Shaders</a></li></ul><div class="st300_subsection_container"><a id="di.forward.overview"/><div class="st300_subsection_title_number"><a id="st300_p2s22ss1" href="#st300_p2s22ss1" title="Subsection 2.22.1: Overview">2.22.1</a></div><div class="st300_subsection_title">Overview</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s22ss1c1" href="#st300_p2s22ss1c1" title="Paragraph 2.22.1.1">1</a></div><div class="st300_paragraph">Because the <a class="st300_link" href="p2s18.xhtml#di.deferred">deferred renderer</a> in the <span class="st300_term package">r2</span> package is incapable of rendering <span class="st300_term term">translucent</span> instances, a separate <span class="st300_term term">forward renderer</span> is provided. A <span class="st300_term translucent">translucent</span> instance is an instance that, when rendered, is simply blended with the current image. This is used to implement visual effects such as glass, water, smoke, fire, etc.</div></div></div><div class="st300_subsection_container"><a id="di.forward.instances"/><div class="st300_subsection_title_number"><a id="st300_p2s22ss2" href="#st300_p2s22ss2" title="Subsection 2.22.2: Instances">2.22.2</a></div><div class="st300_subsection_title">Instances</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s22ss2c1" href="#st300_p2s22ss2c1" title="Paragraph 2.22.2.1">1</a></div><div class="st300_paragraph">The <span class="st300_term package">r2</span> package provides a slightly different abstraction for translucent instances. Because of the strict <a class="st300_link" href="p2s22.xhtml#di.forward.ordering">ordering</a> requirements when rendering translucent instances, it is simply not possible to batch translucent instances by material and shaders for performance reasons as is done with <a class="st300_link" href="p2s19.xhtml#di.deferred.geom.ordering">opaque instances</a>. The <span class="st300_term package">r2</span> package therefore simply has users submit a list of values of type <a class="st300_link_external" href="apidocs/com/io7m/r2/core/R2TranslucentType.html">R2TranslucentType</a> in draw order. Each translucent value contains a <a class="st300_link" href="p2s22.xhtml#di.forward.blending">blending</a> and <a class="st300_link" href="p2s22.xhtml#di.forward.culling">culling</a> configuration, along with an <a class="st300_link" href="p2s6.xhtml#di.instances.overview">instance</a>, and a <a class="st300_link" href="p2s8.xhtml#di.shaders.overview">shader</a> for rendering the instance.</div></div></div><div class="st300_subsection_container"><a id="di.forward.blending"/><div class="st300_subsection_title_number"><a id="st300_p2s22ss3" href="#st300_p2s22ss3" title="Subsection 2.22.3: Blending">2.22.3</a></div><div class="st300_subsection_title">Blending</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s22ss3c1" href="#st300_p2s22ss3c1" title="Paragraph 2.22.3.1">1</a></div><div class="st300_paragraph">Each translucent instance provides a blending configuration that states how the rendered instance is blended with the contents of the current framebuffer.</div></div></div><div class="st300_subsection_container"><a id="di.forward.culling"/><div class="st300_subsection_title_number"><a id="st300_p2s22ss4" href="#st300_p2s22ss4" title="Subsection 2.22.4: Culling">2.22.4</a></div><div class="st300_subsection_title">Culling</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s22ss4c1" href="#st300_p2s22ss4c1" title="Paragraph 2.22.4.1">1</a></div><div class="st300_paragraph">Typically, it is not desirable to render the <span class="st300_term term">back faces</span> of opaque instances as they are by definition invisible. However, translucent instances are by definition translucent and therefore the back faces of the instances may be visible. A translucent instance therefore contains a value that specifies whether front faces, back faces, or both should be rendered.</div></div></div><div class="st300_subsection_container"><a id="di.forward.ordering"/><div class="st300_subsection_title_number"><a id="st300_p2s22ss5" href="#st300_p2s22ss5" title="Subsection 2.22.5: Ordering">2.22.5</a></div><div class="st300_subsection_title">Ordering</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s22ss5c1" href="#st300_p2s22ss5c1" title="Paragraph 2.22.5.1">1</a></div><div class="st300_paragraph">Unlike <span class="st300_term term">opaque</span> instances which can be rendered in any order due to depth testing, translucent instances must be rendered in strict <span class="st300_term term">furthest-to-nearest</span> order. The <span class="st300_term package">r2</span> package simply delegates the responsibility of submitting instances in the correct order to the user. This frees the package from having to know anything about the spatial properties of the scene being rendered.</div></div></div><div class="st300_subsection_container"><a id="di.forward.types"/><div class="st300_subsection_title_number"><a id="st300_p2s22ss6" href="#st300_p2s22ss6" title="Subsection 2.22.6: Types">2.22.6</a></div><div class="st300_subsection_title">Types</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s22ss6c1" href="#st300_p2s22ss6c1" title="Paragraph 2.22.6.1">1</a></div><div class="st300_paragraph">In the <span class="st300_term package">r2</span> package, translucent instances are rendered via implementations of the <a class="st300_link_external" href="apidocs/com/io7m/r2/core/R2TranslucentRendererType.html">R2TranslucentRendererType</a> interface.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s22ss6c2" href="#st300_p2s22ss6c2" title="Paragraph 2.22.6.2">2</a></div><div class="st300_paragraph">Shaders for rendering translucent instances are of type <a class="st300_link_external" href="apidocs/com/io7m/r2/core/shaders/types/R2ShaderTranslucentType.html">R2ShaderTranslucentType</a>.</div></div></div><div class="st300_subsection_container"><a id="di.forward.provided"/><div class="st300_subsection_title_number"><a id="st300_p2s22ss7" href="#st300_p2s22ss7" title="Subsection 2.22.7: Provided Shaders">2.22.7</a></div><div class="st300_subsection_title">Provided Shaders</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s22ss7c1" href="#st300_p2s22ss7c1" title="Paragraph 2.22.7.1">1</a></div><div class="st300_paragraph">Because translucent surface can have a massive range of appearances, the <span class="st300_term package">r2</span> package makes no attempt to provide a wide range of shaders for translucent surfaces.</div></div><div class="st300_formal_item"><div class="st300_formal_item_title"><a id="st300_p2s22ss7c2" href="#st300_p2s22ss7c2" title="Formal item 2.22.7.2: Provided instance shaders">2.22.7.2 Provided instance shaders</a></div><div class="st300_formal_item_content"><table class="st300_table shaders" summary="Provided instance shaders"><thead class="st300_table_head"><tr><th class="st300_table_column_name">Shader</th><th class="st300_table_column_name">Description</th></tr></thead><tbody class="st300_table_body"><tr><td class="st300_table_cell"><a class="st300_link_external" href="apidocs/com/io7m/r2/core/shaders/provided/R2TranslucentShaderBasicPremultipliedSingle.html">R2TranslucentShaderBasicPremultipliedSingle</a></td><td class="st300_table_cell">Basic textured surface without lighting, with distance fading, producing premultiplied alpha output.</td></tr></tbody></table></div></div></div></div><div class="st300_navbar st300_navbar_bottom"><hr class="st300_hr"/><table class="st300_navbar_table" summary="st300_Navigation bar"><tr><td class="st300_navbar_prev_file_cell"><a rel="previous" href="p2s21.xhtml#st300_p2s21" title="Go to previous page">Previous</a></td><td class="st300_navbar_up_file_cell"><a rel="up" href="p2.xhtml#st300_p2" title="Go to parent page">Up</a></td><td class="st300_navbar_next_file_cell"><a rel="next" href="p2s23.xhtml#st300_p2s23" title="Go to next page">Next</a></td></tr><tr><td class="st300_navbar_prev_title_cell">2.21. Deferred Rendering: Position Reconstruction</td><td class="st300_navbar_up_title_cell">2. Design And Implementation</td><td class="st300_navbar_next_title_cell">2.23. Normal Mapping</td></tr></table></div></div></body></html>
