<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>com.io7m.r2 0.3.0-SNAPSHOT Documentation: 2.11. Stencils</title><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8"/><link rel="stylesheet" type="text/css" href="kstructural-layout.css"/><link rel="stylesheet" type="text/css" href="kstructural-colour.css"/><link rel="stylesheet" type="text/css" href="documentation.css"/></head><body><div class="st300_body"><div class="st300_navbar st300_navbar_top"><table class="st300_navbar_table" summary="st300_Navigation bar"><tr><td class="st300_navbar_prev_title_cell">2.10. Shaders: Light</td><td class="st300_navbar_up_title_cell">2. Design And Implementation</td><td class="st300_navbar_next_title_cell">2.12. Lighting</td></tr><tr><td class="st300_navbar_prev_file_cell"><a rel="previous" href="p2s10.xhtml#st300_p2s10" title="Go to previous page">Previous</a></td><td class="st300_navbar_up_file_cell"><a rel="up" href="p2.xhtml#st300_p2" title="Go to parent page">Up</a></td><td class="st300_navbar_next_file_cell"><a rel="next" href="p2s12.xhtml#st300_p2s12" title="Go to next page">Next</a></td></tr></table><hr class="st300_hr"/></div><div class="st300_section_container"><a id="di.stencil"/><div class="st300_section_title_number"><a id="st300_p2s11" href="#st300_p2s11" title="Section 2.11: Stencils">2.11</a></div><div class="st300_section_title">Stencils</div><ul class="st300_contents st300_section_contents_outer st300_section_contents"><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s11.xhtml#st300_p2s11ss1" title="Link to subsection 2.11.1: Overview">2.11.1. Overview</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s11.xhtml#st300_p2s11ss2" title="Link to subsection 2.11.2: Reserved Bits">2.11.2. Reserved Bits</a></li><li class="st300_contents_item st300_contents_item1 st300_contents_item_subsection"><a href="p2s11.xhtml#st300_p2s11ss3" title="Link to subsection 2.11.3: Allow Bit">2.11.3. Allow Bit</a></li></ul><div class="st300_subsection_container"><a id="di.stencil.overview"/><div class="st300_subsection_title_number"><a id="st300_p2s11ss1" href="#st300_p2s11ss1" title="Subsection 2.11.1: Overview">2.11.1</a></div><div class="st300_subsection_title">Overview</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s11ss1c1" href="#st300_p2s11ss1c1" title="Paragraph 2.11.1.1">1</a></div><div class="st300_paragraph">The <span class="st300_term term">stencil buffer</span> enables per-pixel control over rendering. The <span class="st300_term package">r2</span> package uses the stencil buffer to implement several rendering techniques internally, and also exposes limited control of the stencil buffer to users of the renderer via the <a class="st300_link" href="p2s11.xhtml#di.stencil.allow_bit">allow bit</a>.</div></div></div><div class="st300_subsection_container"><a id="di.stencil.reserved"/><div class="st300_subsection_title_number"><a id="st300_p2s11ss2" href="#st300_p2s11ss2" title="Subsection 2.11.2: Reserved Bits">2.11.2</a></div><div class="st300_subsection_title">Reserved Bits</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s11ss2c1" href="#st300_p2s11ss2c1" title="Paragraph 2.11.2.1">1</a></div><div class="st300_paragraph">The current stencil buffer layout used by the <span class="st300_term package">r2</span> package is as follows:</div></div><div class="st300_formal_item"><div class="st300_formal_item_title"><a id="st300_p2s11ss2c2" href="#st300_p2s11ss2c2" title="Formal item 2.11.2.2: Reserved bits">2.11.2.2 Reserved bits</a></div><div class="st300_formal_item_content"><img class="st300_image" alt="Reserved stencil bits." src="images/stencil_bits.png"/></div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s11ss2c3" href="#st300_p2s11ss2c3" title="Paragraph 2.11.2.3">3</a></div><div class="st300_paragraph">Bit <span class="st300_term constant">0</span> is used for <a class="st300_link" href="p2s20.xhtml#di.deferred.light.clip_volumes">light clip volumes</a>.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s11ss2c4" href="#st300_p2s11ss2c4" title="Paragraph 2.11.2.4">4</a></div><div class="st300_paragraph">Bits <span class="st300_term constant">1-2</span> are reserved for future use.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s11ss2c5" href="#st300_p2s11ss2c5" title="Paragraph 2.11.2.5">5</a></div><div class="st300_paragraph">Bits <span class="st300_term constant">3-6</span> are used for <a class="st300_link" href="p2s19.xhtml#di.deferred.geom.group">groups</a>.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s11ss2c6" href="#st300_p2s11ss2c6" title="Paragraph 2.11.2.6">6</a></div><div class="st300_paragraph">Bit <span class="st300_term constant">7</span> is the <a class="st300_link" href="p2s11.xhtml#di.stencil.allow_bit">allow bit</a>.</div></div></div><div class="st300_subsection_container"><a id="di.stencil.allow_bit"/><div class="st300_subsection_title_number"><a id="st300_p2s11ss3" href="#st300_p2s11ss3" title="Subsection 2.11.3: Allow Bit">2.11.3</a></div><div class="st300_subsection_title">Allow Bit</div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s11ss3c1" href="#st300_p2s11ss3c1" title="Paragraph 2.11.3.1">1</a></div><div class="st300_paragraph">The <span class="st300_term package">r2</span> package reserves a single bit in the current stencil buffer, known as the <span class="st300_term term">allow bit</span>. In all subsequent rendering operations, a pixel may only be written if the corresponding allow bit in the stencil buffer is <span class="st300_term constant">true</span>.</div></div><div class="st300_paragraph_container"><div class="st300_paragraph_number"><a id="st300_p2s11ss3c2" href="#st300_p2s11ss3c2" title="Paragraph 2.11.3.2">2</a></div><div class="st300_paragraph">The stencil buffer allow bits are populated via the use of a <a class="st300_link_external" href="apidocs/com/io7m/r2/core/R2StencilRendererType.html">stencil renderer</a>. The user specifies a series of <a class="st300_link" href="p2s6.xhtml#di.instances">instances</a> whose only purpose is to either enable or disable the allow bit for each rendered pixel. Users may specify whether instances are <span class="st300_term term">positive</span> or <span class="st300_term term">negative</span>. Positive instances set the allow bit to <span class="st300_term constant">true</span> for each overlapped pixel, and negative instances set the allow bit to <span class="st300_term constant">false</span> for each overlapped pixel.</div></div></div></div><div class="st300_navbar st300_navbar_bottom"><hr class="st300_hr"/><table class="st300_navbar_table" summary="st300_Navigation bar"><tr><td class="st300_navbar_prev_file_cell"><a rel="previous" href="p2s10.xhtml#st300_p2s10" title="Go to previous page">Previous</a></td><td class="st300_navbar_up_file_cell"><a rel="up" href="p2.xhtml#st300_p2" title="Go to parent page">Up</a></td><td class="st300_navbar_next_file_cell"><a rel="next" href="p2s12.xhtml#st300_p2s12" title="Go to next page">Next</a></td></tr><tr><td class="st300_navbar_prev_title_cell">2.10. Shaders: Light</td><td class="st300_navbar_up_title_cell">2. Design And Implementation</td><td class="st300_navbar_next_title_cell">2.12. Lighting</td></tr></table></div></div></body></html>
